(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{c5de:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"bg-blue-grey-9 text-amber-8",attrs:{padding:""}},[i("div",{staticClass:"q-pa-md row justify-evenly items-center content-around"},[i("q-form",{staticClass:"col-xs-12 col-sm-6 col-md-6",on:{submit:t.onSubmit}},[i("q-input",{attrs:{hint:"Enter title (unique, required)",label:"Title",type:"string","hide-hint":"",autofocus:""},model:{value:t.inputData.title,callback:function(e){t.$set(t.inputData,"title",e)},expression:"inputData.title"}}),i("q-input",{attrs:{hint:"Enter description (required)",label:"Description",type:"textarea","hide-hint":"",filled:""},model:{value:t.inputData.description,callback:function(e){t.$set(t.inputData,"description",e)},expression:"inputData.description"}}),i("q-input",{attrs:{hint:"Enter price (required)",label:"Price",type:"number","hide-hint":""},model:{value:t.inputData.price,callback:function(e){t.$set(t.inputData,"price",e)},expression:"inputData.price"}}),i("q-input",{attrs:{hint:"Enter color (required)",label:"Color",type:"string","hide-hint":""},model:{value:t.inputData.color,callback:function(e){t.$set(t.inputData,"color",e)},expression:"inputData.color"}}),i("q-checkbox",{attrs:{label:"Sold Out"},model:{value:t.inputData.sold_out,callback:function(e){t.$set(t.inputData,"sold_out",e)},expression:"inputData.sold_out"}}),i("q-input",{attrs:{hint:"Enter number of likes (not required, default: likes=0",label:"Likes",type:"number","hide-hint":""},model:{value:t.inputData.likes,callback:function(e){t.$set(t.inputData,"likes",e)},expression:"inputData.likes"}}),i("q-file",{staticStyle:{"max-width":"300px"},attrs:{value:"FileList",color:"amber-8",label:"Add photo",filled:"","use-chips":"",clearable:"",accept:".jpg, .png, image/*",multiple:"",append:""},model:{value:t.inputData.photos,callback:function(e){t.$set(t.inputData,"photos",e)},expression:"inputData.photos"}}),i("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}})],1)],1),i("div",{staticClass:"row justify-evenly items-center content-around"},t._l(t.productsWithSpecs,(function(e,a){return i("div",{key:a,staticClass:"q-pa-md col-xs-12 col-sm-6 col-md-4",staticStyle:{"min-width":"300px"}},[i("q-card",[i("q-img",{attrs:{src:e.photos},on:{click:function(i){return t.editProduct(e)}}},[i("div",{staticClass:"absolute-bottom text-right",staticStyle:{"max-height":"35px"}},[t._v("\n            "+t._s(e.title)+"\n          ")]),i("q-card-section",{staticClass:"absolute-bottom-left",staticStyle:{"max-height":"35px","background-color":"transparent","font-size":"16px"}},[t._v("\n            "+t._s(e.price)+"$\n          ")])],1),i("div",{staticClass:"column justify-evenly items-center content-around",staticStyle:{"background-color":"#232830"}},[i("div",[t._v("Id: "+t._s(e.id))]),i("div",[t._v("Title: "+t._s(e.title))]),i("div",[t._v("Description: "+t._s(e.description))]),i("div",[t._v("Color: "+t._s(e.color))]),i("div",[t._v("Likes: "+t._s(e.likes))]),i("div",[t._v("Sold_out: "+t._s(e.sold_out))])])],1)],1)})),0)])},s=[],o=(i("e01a"),{name:"AddProduct",data(){return{inputData:{title:"",description:"",price:0,color:"",sold_out:"",likes:0,photos:null},productsWithSpecs:[]}},methods:{editProduct(t){this.$router.push({path:`edit_product/${t.id}`,params:{id:`${t.id}`}})},onSubmit(){const t=new FormData,{title:e,description:i,price:a,color:s,sold_out:o,likes:n,photos:r}=this.inputData;t.append("title",e),t.append("description",i),t.append("price",a),t.append("color",s),t.append("sold_out",o),t.append("likes",n),t.append("photos",r[0],r[0].name),this.$axios({method:"post",url:"products/edit_add_or_list/",data:t,headers:{Authorization:`Bearer ${localStorage.getItem("access")}`}}).then((t=>{console.log("RESPONSE RECEIVED: ",t)})).catch((e=>{401===e.response.status&&this.$axiosCheckRefreshToken().then((e=>{const{access:i,refresh:a}=e.data;this.$setTokens(i,a),this.$axios({method:"post",url:"products/edit_add_or_list/",data:t,headers:{Authorization:`Bearer ${localStorage.getItem("access")}`}})})).catch((t=>{this.$removeTokens(),console.log(t,"none of tokens is valid")}))})),this.inputData.title="",this.inputData.description="",this.inputData.color="",this.inputData.price=0,this.inputData.likes=0,this.inputData.sold_out=!1,this.inputData.photos=null}},beforeCreate(){this.$axios({method:"get",url:"/products/edit_add_or_list/",headers:{Authorization:`Bearer ${localStorage.getItem("access")}`}}).then((t=>this.productsWithSpecs=t.data)).catch((t=>{401===t.response.status&&this.$axiosCheckRefreshToken().then((t=>{const{access:e,refresh:i}=t.data;this.$setTokens(e,i),this.$axios({method:"get",url:"/products/edit_add_or_list/",headers:{Authorization:`Bearer ${localStorage.getItem("access")}`}}).then((t=>this.productsWithSpecs=t.data)).catch((t=>console.log(t,"error in refresh token, before create")))})).catch((t=>{this.$removeTokens(),console.log(t,"none of tokens is valid in before create")}))}))}}),n=o,r=i("2877"),l=i("9989"),c=i("0378"),p=i("27f9"),d=i("8f8e"),u=i("7d53"),h=i("9c40"),m=i("f09f"),b=i("068f"),_=i("a370"),f=i("eebe"),k=i.n(f),v=Object(r["a"])(n,a,s,!1,null,null,null);e["default"]=v.exports;k()(v,"components",{QPage:l["a"],QForm:c["a"],QInput:p["a"],QCheckbox:d["a"],QFile:u["a"],QBtn:h["a"],QCard:m["a"],QImg:b["a"],QCardSection:_["a"]})}}]);